{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst api_key = \"50385354-3e4bea1f358fcf603a5420cc4\";\nconst baseURL = \"https://pixabay.com/api/\";\nlet page = 1;\nexport const per_page = 15;\n\n\n\naxios.defaults.baseURL= baseURL;\n\nexport async function getImagesByQuery(query, page){\n    const response = axios.get(`${baseURL}`, {\n        params:{\n            key: api_key,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: per_page\n\n        }\n    });\n    return response;\n};","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images){\n   \n    const galleryElement = images.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads})=>\n    `<li class=\"gallery-element\">\n    <a href=\"${largeImageURL}\">\n    <img class=\"gallery-element-img\" src=${webformatURL} alt=${tags}>\n    </a>\n    <div class=\"element-description\">\n    <ul class=\"description-list\">\n        <li>\n        <p>Likes</p>${likes}\n        </li>\n        <li>\n        <p>Views</p>${views}\n        </li>\n        <li>\n        <p>Comments</p>${comments}\n        </li>\n        <li>\n        <p>Downloads</p>${downloads}\n        </li>\n    </ul>\n    \n    </div>\n    \n    </li>`\n    \n    );\n    gallery.insertAdjacentHTML(\"beforeend\", galleryElement.join(''));\n   lightbox.refresh();\n};\n\nexport function clearGallery(){\n    gallery.innerHTML = '';\n};\n\nexport function showLoader(){\n    loader.classList.add('is-active');\n\n};\n\nexport function hideLoader(){\n     loader.classList.remove('is-active');\n}","import { getImagesByQuery, per_page } from './js/pixabay-api.js';\nimport {clearGallery, createGallery, showLoader, hideLoader} from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst load_more_btn = document.querySelector(\".load-more-btn\");\n\nlet userValue;\nlet currentPage = 1;\nlet totalPages = 0;\n\n\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n   userValue = form.elements['search-text'].value.trim();\n  if (!userValue) return;\n\n  currentPage = 1;\n  clearGallery();\n  showLoader();\n\n    try{\n      const response = await getImagesByQuery(userValue, currentPage)\n      const images = response.data.hits;\n      const totalHits = response.data.totalHits;\n      if (images.length > 0) {\n        createGallery(images);\n\n        totalPages = Math.ceil(totalHits / per_page);\n        if(currentPage<totalPages){\n          load_more_btn.classList.add('is-active');\n        }\n \n      }\n      else{\n        iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        class: 'custom-toast',\n      })\n      }\n    }\n    catch(error){\n      iziToast.show({\n        message: error,  \n        class: 'custom-toast'\n      });\n    }  \n    finally{\n      hideLoader();\n    };\n   form.elements['search-text'].value = '';\n    \n  \n});\n\nload_more_btn.addEventListener('click', async ()=>{\n  showLoader();\n  try{\n    currentPage++;\n    const response = await getImagesByQuery(userValue, currentPage);\n    const images = response.data.hits;\n\n    if(images.length>0){\n      createGallery(images);\n    }\n    if(currentPage< totalPages){\n      load_more_btn.classList.add('is-active');\n    }\n  }\n  catch(error){\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\"\n    });\n  }\n  finally{\n    hideLoader();\n  }\n\n});\n"],"names":["api_key","baseURL","per_page","axios","getImagesByQuery","query","page","gallery","loader","lightbox","SimpleLightbox","createGallery","images","galleryElement","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","form","load_more_btn","userValue","currentPage","totalPages","event","response","totalHits","iziToast","error"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAU,2BAEHC,EAAW,GAIxBC,EAAM,SAAS,QAASF,EAEjB,eAAeG,EAAiBC,EAAOC,EAAK,CAa/C,OAZiBH,EAAM,IAAI,GAAGF,CAAO,GAAI,CACrC,OAAO,CACH,IAAKD,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUJ,CAEb,CACT,CAAK,CAEL,CCnBA,MAAMK,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAGzCC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAO,CAEjC,MAAMC,EAAiBD,EAAO,IAAI,CAAC,CAAC,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACxG;AAAA,eACWL,CAAa;AAAA,2CACeD,CAAY,QAAQE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sBAK7CC,CAAK;AAAA;AAAA;AAAA,sBAGLC,CAAK;AAAA;AAAA;AAAA,yBAGFC,CAAQ;AAAA;AAAA;AAAA,0BAGPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAQnC,EACIb,EAAQ,mBAAmB,YAAaM,EAAe,KAAK,EAAE,CAAC,EAChEJ,EAAS,QAAO,CACnB,CAEO,SAASY,GAAc,CAC1Bd,EAAQ,UAAY,EACxB,CAEO,SAASe,GAAY,CACxBd,EAAO,UAAU,IAAI,WAAW,CAEpC,CAEO,SAASe,GAAY,CACvBf,EAAO,UAAU,OAAO,WAAW,CACxC,CCpDA,MAAMgB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAgB,SAAS,cAAc,gBAAgB,EAE7D,IAAIC,EACAC,EAAc,EACdC,EAAa,EAIjBJ,EAAK,iBAAiB,SAAU,MAAMK,GAAS,CAG7C,GAFAA,EAAM,eAAc,EACnBH,EAAYF,EAAK,SAAS,aAAa,EAAE,MAAM,OAC5C,EAACE,EAEL,CAAAC,EAAc,EACdN,IACAC,IAEE,GAAG,CACD,MAAMQ,EAAW,MAAM1B,EAAiBsB,EAAWC,CAAW,EACxDf,EAASkB,EAAS,KAAK,KACvBC,EAAYD,EAAS,KAAK,UAC5BlB,EAAO,OAAS,GAClBD,EAAcC,CAAM,EAEpBgB,EAAa,KAAK,KAAKG,EAAY7B,CAAQ,EACxCyB,EAAYC,GACbH,EAAc,UAAU,IAAI,WAAW,GAKzCO,EAAS,KAAK,CACd,QAAS,2EACT,MAAO,cACf,CAAO,CAEF,OACKC,EAAM,CACVD,EAAS,KAAK,CACZ,QAASC,EACT,MAAO,cACf,CAAO,CACF,QACM,CACLV,GAEN,CAAGC,EAAK,SAAS,aAAa,EAAE,MAAQ,GAGxC,CAAC,EAEDC,EAAc,iBAAiB,QAAS,SAAU,CAChDH,IACA,GAAG,CACDK,IAEA,MAAMf,GADW,MAAMR,EAAiBsB,EAAWC,CAAW,GACtC,KAAK,KAE1Bf,EAAO,OAAO,GACfD,EAAcC,CAAM,EAEnBe,EAAaC,GACdH,EAAc,UAAU,IAAI,WAAW,CAE1C,MACW,CACVO,EAAS,KAAK,CACZ,QAAS,4DACf,CAAK,CACF,QACM,CACLT,GACD,CAEH,CAAC"}