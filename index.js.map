{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst api_key = \"50385354-3e4bea1f358fcf603a5420cc4\";\nconst baseURL = \"https://pixabay.com/api/\";\nexport const per_page = 15;\n\n\n\naxios.defaults.baseURL= baseURL;\n\nexport async function getImagesByQuery(query, page){\n    const response = await axios.get(`${baseURL}`, {\n        params:{\n            key: api_key,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: per_page\n\n        }\n    });\n    return{\n        images: response.data.hits,\n        totalHits: response.data.totalHits\n    };\n};","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nconst loader = document.querySelector(\".loader\");\nexport const load_more_btn = document.querySelector(\".load-more-btn\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images){\n   \n    const galleryElement = images.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads})=>\n    `<li class=\"gallery-element\">\n    <a href=\"${largeImageURL}\">\n    <img class=\"gallery-element-img\" src=${webformatURL} alt=${tags}>\n    </a>\n    <div class=\"element-description\">\n    <ul class=\"description-list\">\n        <li>\n        <p>Likes</p>${likes}\n        </li>\n        <li>\n        <p>Views</p>${views}\n        </li>\n        <li>\n        <p>Comments</p>${comments}\n        </li>\n        <li>\n        <p>Downloads</p>${downloads}\n        </li>\n    </ul>\n    \n    </div>\n    \n    </li>`\n    \n    );\n    gallery.insertAdjacentHTML(\"beforeend\", galleryElement.join(''));\n   lightbox.refresh();\n};\n\nexport function clearGallery(){\n    gallery.innerHTML = '';\n};\n\nexport function showLoader(){\n    loader.classList.add('is-active');\n\n};\n\nexport function hideLoader(){\n    loader.classList.remove('is-active');\n}\n\nexport function showBtn(){\n    load_more_btn.classList.add('is-active');\n};\nexport function hideBtn(){\n    load_more_btn.classList.remove('is-active');\n};","import { getImagesByQuery, per_page } from './js/pixabay-api.js';\nimport {clearGallery, createGallery, showLoader, hideLoader, showBtn, hideBtn, load_more_btn} from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\n\n\nlet userValue;\nlet currentPage = 1;\nlet totalPages = 0;\n\nhideBtn();\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n   userValue = form.elements['search-text'].value.trim();\n  if (!userValue) { \n    hideBtn();\n    return;\n  }\n\n  currentPage = 1;\n  totalPages = 0;\n  clearGallery();\n  showLoader();\n\n    try{\n      const response = await getImagesByQuery(userValue, currentPage)\n      const images = response.images;\n      const totalHits = response.totalHits;\n      if (images.length > 0) {\n        createGallery(images);\n\n        setTimeout(() => {\n        const firstCard = document.querySelector(\".gallery-element\");\n        if (firstCard) {\n          const cardHeight = firstCard.getBoundingClientRect().height;\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n          });\n        }\n      }, 0);\n\n\n        totalPages = Math.ceil(totalHits / per_page);\n        if(currentPage<totalPages){\n          showBtn();\n        }\n        else{\n          hideBtn();\n        }\n \n      }\n      else{\n        iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        class: 'custom-toast',\n      });\n      hideBtn();\n      }\n    }\n    catch(error){\n      iziToast.show({\n        message: error,  \n        class: 'custom-toast'\n      });\n      hideBtn();\n    }  \n    finally{\n      hideLoader();\n    };\n   form.elements['search-text'].value = '';\n    \n});\n\nload_more_btn.addEventListener('click', async ()=>{\n  showLoader();\n  try{\n    currentPage++;\n    const response = await getImagesByQuery(userValue, currentPage);\n    const images = response.images;\n\n    if(images.length>0){\n      createGallery(images);\n\n      setTimeout(() => {\n        const firstCard = document.querySelector(\".gallery-element\");\n        if (firstCard) {\n          const cardHeight = firstCard.getBoundingClientRect().height;\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n          });\n        }\n      }, 0);\n    }\n    if(currentPage< totalPages){\n      showBtn();\n    }\n    else{\n      iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      class: 'custom-toast'\n    });\n      hideBtn();\n    }\n  }\n  catch(error){\n    // console.log(error);\n    iziToast.show({\n      message: error,\n      class: 'custom-toast'\n    });\n    hideBtn();\n  }\n  finally{\n    hideLoader();\n    \n  }\n\n});\n"],"names":["api_key","baseURL","per_page","axios","getImagesByQuery","query","page","response","gallery","loader","load_more_btn","lightbox","SimpleLightbox","createGallery","images","galleryElement","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showBtn","hideBtn","form","userValue","currentPage","totalPages","event","totalHits","firstCard","cardHeight","iziToast","error"],"mappings":"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"}